<br>
<div class="row">

  <div class="col-xl-2">
    <div class="row">


      <div
        class="col-xl-4">
        <button
          routerLink="/candidates"
          style="outline: 0;"
          mat-raised-button color="primary"><i
          class="far fa-arrow-alt-circle-left"></i> Candidate Panel</button>
      </div>



    </div>
  </div>

  <div class="col-xl-8"
       style="
       font-weight: bold;
       opacity: .7;
       text-align: center;"
       *ngIf="candidate.JobAssignments === null; else jobIsNotAssigned">
    Assign Job to Change Candidate Status
  </div>

  <ng-template #jobIsNotAssigned>
    <div class="col-xl-8">

    </div>
  </ng-template>

  <div class="col-xl-2 text-xl-right">
    <button
      [disabled]="candidate.JobAssignments !== null"
      (click)="addJobAssignment()"
      style="
      outline: 0;"
      color="primary"
      mat-raised-button> Assign Job</button>
  </div>

</div>
<hr>

<div class="row">

  <div class="col-xl-5">

    <div class="row">

      <div class="col-xl-9">

        <div class="row">
          <div class="col-xl-12"
          style="font-size: 30px; padding-left: 20px;">

            {{ candidate.FirstName }}  {{ candidate.LastName }}

          </div>
        </div>

        <div class="row" >
          <div class="col-xl-4 "
               style="">
            <star-rating
              class="criteria"
              size="medium"
              [rating] = "0"
              [readOnly]="true"
              [starType]="'svg'"
            ></star-rating>
          </div>
        </div>

      </div>


      <div class="col-xl-3" style="text-align: center;">

        <div class="row">
          <div class="col-xl-12">

            <img
              class="img-responsive"
              style="outline: 0;
              border-radius: 50%; height: 100px; width: 100px"
              [src]="imageFolderPath + candidate.ImageName">

          </div>
        </div>

        <div class="row">

          <div class="offset-xl-1 col-xl-5 text-xl-right">

            <i
              matRipple
              [matRippleUnbounded]="true"
              [ngClass]="[!isDisabled ? 'enable-icon' : 'disable-icon']"
              (click)="getCandidateImage()"
              style="cursor: pointer;"
              title="Update photo"
              class="fas fa-plus-circle"></i>

            <input
              #image
              id="candidateImage"
              hidden
              type="file"
              accept="image/*"
              (change)="updateCandidateImage($event.target.files)">

          </div>

          <div class="col-xl-5 text-xl-left">

            <i matRipple
               [matRippleUnbounded]="true"
               [ngClass]="[!isDisabled ? 'enable-icon' : 'disable-icon']"
               (click)="deleteCandidateImage()"
               style="cursor: pointer;"
               title="Remove image"
               class="far fa-trash-alt"></i>

          </div>

        </div>

      </div>

    </div>

    <hr>

    <div class="row">

      <div class="col-xl-3 text-xl-center" *ngIf="candidate.IsFavourite">
        <button
          [disabled]="isDisabled"
          (click)="unfavouriteCandidates(candidate)"
          style="background-color: transparent; outline: 0; width: 100%;"
          mat-flat-button><i
          style="color: #FFD61D;" class="fas fa-heart"></i>
          Unfavourite</button>
      </div>

      <div class="col-xl-3 text-xl-center" *ngIf="!candidate.IsFavourite">
        <button
          [disabled]="isDisabled"
          (click)="favouriteCandidates(candidate)"
          style="background-color: transparent; outline: 0; width: 100%"
          mat-flat-button><i class="far fa-heart"></i>
          Favourite</button>
      </div>

      <div *ngIf="!candidate.IsArchived" class="col-xl-3 text-xl-center">
        <button
          [disabled]="isDisabled"
          style="background-color: transparent; outline: 0;"
          (click)="archiveCandidates(candidate)"
          mat-flat-button><i class="fas fa-archive"></i> Archive</button>
      </div>

      <div *ngIf="candidate.IsArchived" class="col-xl-3 text-xl-center">
        <button
          [disabled]="isDisabled"
          (click)="restoreCandidates(candidate)"
          style="background-color: transparent; outline: 0;"
          mat-flat-button><i class="far fa-window-restore"></i> Restore</button>
      </div>

      <div *ngIf="!candidate.IsArchived || candidate.JobAssignments !== null" class="col-xl-3 text-xl-center">
        <button
          routerLink="/candidates/{{ candidate.Id }}/edit-candidate"
          style="background-color: transparent; outline: 0;"
          mat-flat-button><i class="far fa-edit"></i> Edit</button>
      </div>

      <div class="col-xl-3 text-xl-center">
        <button
          [disabled]="isDisabled"
          (click)="deleteCandidate()"
          style="background-color: transparent; outline: 0;"
          mat-flat-button><i class="far fa-trash-alt"></i> Delete</button>
      </div>
    </div>

    <hr>

    <div class="row">
      <div style="font-size: 14px;" class="col-xl-8">
        <strong> <i title="Source and Candidate Application Date"
                    class="fab fa-osi"></i> {{ candidate.Source.Name }} </strong> on
        {{ getApplicationDate() }}
      </div>

      <div class="col-xl-4 text-xl-right" style="font-size: 22px;">

       <span *ngIf="candidate.FacebookUrl !== ''">
        <i style="cursor: pointer; color: #3b5998;"
           (click)="goToFacebookProfile()"
           class="fab fa-facebook-square"></i> &nbsp;
       </span>

        <span *ngIf="candidate.LinkedInUrl !== ''" >
          <i style="cursor: pointer; color: #0e76a8;"
             (click)="goToLinkedInProfile()"
             class="fab fa-linkedin"></i> &nbsp;
        </span>

        <i *ngIf="candidate.GitHubUrl !== ''"
           style="cursor: pointer; color: black;"
           (click)="goToGithubProfile()"
           class="fab fa-github"></i>

      </div>

    </div>

    <!--<div class="row">-->
      <!--<div class="col-xl-12">-->

        <!--<i title="Tag" style="font-size: 14px;" class="fas fa-tag"></i>-->
        <!--<button mat-flat-button style="background-pipelineStageColor: transparent; outline: 0;">New <i class="fas fa-plus"></i></button>-->

      <!--</div>-->
    <!--</div>-->
    <hr>

    <div class="row">
      <div class="col-xl-12" style="font-size: 14px; padding-top: 3px; padding-bottom: 3px;">

        <i  title="Email" class="far fa-envelope"></i> {{ candidate.Email }}

      </div>
    </div>

    <div class="row">
      <div class="col-xl-12" style="font-size: 14px; padding-top: 3px; padding-bottom: 3px;">

        <i  title="Phone" class="fas fa-phone"></i> {{ candidate.Mobile }}

      </div>
    </div>

    <div class="row">
      <div class="col-xl-12" style="font-size: 14px; padding-top: 3px; padding-bottom: 3px;">

        <i  title="Address" class="fas fa-map-marker-alt"></i>
        {{ candidate.Address }} {{ candidate.City }} {{ candidate.State }} {{ candidate.Country }}

      </div>
    </div>

    <hr>

    <div class="row">

      <div class="col-xl-6" style="padding-top: 7px;">
        <h6>ATTACHMENTS</h6>
      </div>

      <div class="col-xl-6 text-xl-right" >
        <button
          style="outline: 0;"
          type="button"
          matTooltip="Add attachments"
          (click)="getCandidateAttachment()"
          mat-flat-button><i class="fas fa-plus-circle"></i> Add</button>
      </div>

      <input id="candidateAttachment"
             (change)="addNewCandidateAttachment($event)"
             hidden
             type="file"/>

    </div>
    <hr>

    <div class="row"
         *ngIf="candidate.CandidateAttachments !== null; else noAttachments">
      <div class="col-xl-12"
           *ngFor="let candidateAttachment of candidate.CandidateAttachments;
                   let i = index">

        <div class="row">
        <div class="col-xl-10" style="
          font-size: 14px;
          font-weight: bold;
          padding-top: 6px;
          padding-bottom: 6px;">

          <i class="far fa-file"></i> {{ candidateAttachment.FileName }}
          <span
            style="
              color: #000;
              opacity: .6;
              font-size: 10px;"
            *ngIf="candidateAttachment.IsResume">(Resume)</span>

        </div>

        <div class="col-xl-2">

          <div class="row">

            <div class="col-xl-4">
              <i
                matRipple
                [matRippleUnbounded]="true"
                [ngClass]="[!isDisabled ? 'enable-icon' : 'disable-icon']"
                (click)="downloadCandidateAttachment(candidateAttachment)"
                style="cursor: pointer;"
                title="Download" class="fas fa-download"></i>
            </div>


            <div class="col-xl-4">
              <i
                matRipple
                [matRippleUnbounded]="true"
                [ngClass]="[!isDisabled ? 'enable-icon' : 'disable-icon']"
                (click)="changeCandidateResume(candidateAttachment ,i)"
                style="cursor: pointer;"
                title="Set as Resume"
                class="fas fa-file-prescription"></i>
            </div>


            <div class="col-xl-4">
              <i
                matRipple
                [matRippleUnbounded]="true"
                [ngClass]="[!isDisabled ? 'enable-icon' : 'disable-icon']"
                (click)="deleteCandidateAttachment(candidateAttachment, i)"
                style="cursor: pointer;"
                title="Delete" class="far fa-trash-alt"></i>
            </div>

          </div>

        </div>
      </div>

      </div>
    </div>

    <ng-template #noAttachments>
      <div class="row">
        <div class="col-xl-12" style="
        opacity: .7;
        font-size: 14px;">
          No Attachments
        </div>
      </div>
    </ng-template>


    <div class="row" *ngIf="candidate.CandidateEducations !== null">
      <div class="col-xl-12" style="
      padding-top: 18px;
      font-weight: bold;">
        EDUCATION
      </div>
    </div>
    <hr *ngIf="candidate.CandidateEducations !== null">

    <div *ngIf="candidate.CandidateEducations !== null">

      <div class="row"
           style="padding-bottom: 7px;
                padding-top: 7px; "
           *ngFor="let candidateEducation of candidate.CandidateEducations">
        <div class="col-xl-8">

          <div class="row">
            <div class="col-xl-12"
                 style="font-size: 18px;">
              {{ candidateEducation.Name }}
            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="font-size: 13px;">
              <i class="fas fa-graduation-cap"></i>
              {{ candidateEducation.InstituteName }}
            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="
               font-weight: bold;
               opacity: .8;
               font-size: 12px;">
              {{ candidateEducation.Result }}
            </div>
          </div>

        </div>

        <div class="col-xl-2" *ngIf="candidateEducation.StartDate !== ''">

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getStartMonthOfEducation(candidateEducation) }}

            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getStartYearOfEducation(candidateEducation) }}

            </div>
          </div>

        </div>

        <div class="col-xl-2" *ngIf="candidateEducation.EndDate !== ''">

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getEndMonthOfEducation(candidateEducation) }}

            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getEndYearOfEducation(candidateEducation) }}

            </div>
          </div>

        </div>

      </div>

    </div>


    <div class="row" *ngIf="candidate.CandidateExperiences !== null">
      <div class="col-xl-12" style="
      padding-top: 18px;
      font-weight: bold;">
        EXPERIENCE
      </div>
    </div>
    <hr *ngIf="candidate.CandidateEducations !== null">

    <div *ngIf="candidate.CandidateExperiences !== null">

      <div class="row"
           style="padding-bottom: 7px;
                padding-top: 7px; "
           *ngFor="let candidateExperience of candidate.CandidateExperiences">
        <div class="col-xl-8">

          <div class="row">
            <div class="col-xl-12"
                 style="font-size: 18px;">
              {{ candidateExperience.EmployerName }}
            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="font-size: 13px;">
              <i class="fas fa-briefcase"></i>
              {{ candidateExperience.Designation }}
            <span *ngIf="candidateExperience.Role !== ''"> | {{  candidateExperience.Role}} </span>
            </div>
          </div>


        </div>

        <div class="col-xl-2" *ngIf="candidateExperience.StartDate !== ''">

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getStartMonthOfExperience(candidateExperience) }}

            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getStartYearOfExperience(candidateExperience) }}

            </div>
          </div>

        </div>

        <div *ngIf="candidateExperience.EndDate !== ''">

        <div class="col-xl-2" *ngIf="!candidateExperience.IsCurrent; else currentlyWorking">

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getEndMonthOfExperience(candidateExperience) }}

            </div>
          </div>

          <div class="row">
            <div class="col-xl-12"
                 style="

               opacity: .8;
               font-size: 12px;">

              {{ getEndYearOfExperience(candidateExperience) }}

            </div>
          </div>

        </div>

        </div>

        <ng-template #currentlyWorking>

          <div class="col-xl-2">

            <div class="row">
              <div class="col-xl-12"
                   style="opacity: .8;
                   padding-top: 10px;
                   font-size: 12px;">

                Present

              </div>
            </div>
          </div>

        </ng-template>
      </div>

    </div>

  </div>




  <div class="col-xl-7">

    <div *ngIf="candidate.JobAssignments !== null ">

      <div class="row"
           [ngStyle]="{'opacity': candidate.IsArchived ? .8 : 1 }"
           style="
           background-color: #fafbfb;
           border: 1px solid antiquewhite;
           padding-top: 10px;
           padding-bottom: 10px;
           border-left: 5px solid #90dac9;">

        <div class="col-xl-4"
             style="color: #4b96e6;
             font-size: 17px;
             padding-left: 15px;">

          <span
            *ngIf="candidate.IsArchived"
          >{{ getLastAssignedJobName() }} </span>

          <span
            *ngIf="!candidate.IsArchived"
            style="cursor: pointer;"
            (click)="goToJobDetail()"
            title="Go To Detail"
          >{{ getLastAssignedJobName() }} </span>
        </div>

        <div class="col-xl-4">
          <mat-form-field appearance="outline" class="job-assign">
            <mat-select
              [disabled]="candidate.IsArchived"
              class="stage-select"
              (selectionChange)="pipelineStageChanged($event.value)"
              [(value)]="currentPipelineStageId"
              style="font-size: 15px; ">

              <mat-select-trigger>
                <input
                  readonly
                  [ngClass]="candidate.IsArchived ? 'fade' : 'not-fade'"
                  style="outline: 0;
                border: 1px solid white;
                border-radius: 3px;
                cursor: pointer; height: 25px; width: 25px;"
                  [style.background]="pipelineStageColor"/>
                {{ pipelineStageName }}
              </mat-select-trigger>

              <mat-optgroup

                *ngFor="let pipeline of job.Workflow.Pipelines" [label]="pipeline.Name">


                <mat-option


                  style="font-size: 15px; background-color: #ffffff;"
                  *ngFor="let pipelineStage of pipeline.PipelineStages"
                            [value]="pipelineStage.Id">

                    <input
                      readonly
                      style="outline: 0;
                border: 1px solid white;
                border-radius: 3px;
                cursor: pointer; height: 25px; width: 25px;"
                      [style.background]="pipelineStage.Color"/>
                   {{ pipelineStage.Name }}

                </mat-option>

              </mat-optgroup>

            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-xl-3" style="padding-top: 3px;">

          <button
            style="font-weight: 900;"
            [disabled]="candidate.IsArchived"
            (click)="openCurrentPipelineStage()"
            class="btn btn-info">||</button>

          <button
            style="margin-right: 4px; margin-left: 4px;"
            [disabled]="candidate.IsArchived"
            (click)="moveToRejected()"
            class="btn btn-danger"><i class="fas fa-times"></i></button>

          <button
            [disabled]="candidate.IsArchived"
            (click)="moveToNextStage()"
            class="btn btn-success">
            <i class="fas fa-angle-double-right"></i></button>

        </div>

        <div class="col-xl-1"
             style="
             padding-left: 1px;
             padding-top: 1px;">

          <button
            [disabled]="candidate.IsArchived"
            mat-icon-button
            style="outline: 0;"
            [matMenuTriggerFor]="menu">
            <mat-icon>
              more_horiz
            </mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <button
              style="outline: 0;"
              (click)="changeJobAssignment()"
              mat-menu-item>
              <mat-icon>subdirectory_arrow_right
              </mat-icon>
              <span>Change Job</span>
            </button>
            <button
              (click)="removeJobAssignment()"
              mat-menu-item>
              <mat-icon>remove_circle_outline
              </mat-icon>
              <span>Remove Job</span>
            </button>
          </mat-menu>
        </div>


      </div>
      <br>

    </div>



    <div class="row">
      <div class="offset-xl-8 col-xl-2 text-xl-center">
        <button
          [disabled]="candidate.IsArchived"
          matTooltip="Scorecard"
          matTooltipPosition="below"
          style="outline: 0; font-size: 20px; width: 100%;"
          mat-flat-button routerLinkActive="active"
          routerLink="candidate-scorecard"><i class="far fa-list-alt"></i></button>
      </div>


      <!--<div class="col-xl-4 text-xl-center">-->
        <!--<button-->
          <!--matTooltip="Email"-->
          <!--matTooltipPosition="below"-->
          <!--style="outline: 0; font-size: 20px; width: 100%;"-->
          <!--mat-flat-button-->
          <!--routerLinkActive="active"-->
          <!--routerLink="candidate-email"><i class="far fa-envelope"></i></button>-->
      <!--</div>-->

      <div class="col-xl-2 text-xl-center">
        <button
          matTooltip="Interviews"
          [disabled]="candidate.IsArchived"
          matTooltipPosition="below"
          style="outline: 0; font-size: 20px; width: 100%;"
          mat-flat-button
          routerLinkActive="active"
          routerLink="candidate-interviews"><i class="fas fa-calendar-alt"></i></button>
      </div>
    </div>

    <div class="row">
      <div class="col-xl-12">
        <hr>
        <br>
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>

</div>


